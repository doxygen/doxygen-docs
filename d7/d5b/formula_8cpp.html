<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doxygen: src/formula.cpp File Reference</title>
<link rel="icon" href="../../doxygen.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript" src="../../darkmode_toggle.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../doc_internal.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Doxygen
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d7/d5b/formula_8cpp.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">formula.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;map&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;utility&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d9a/formula_8h_source.html">formula.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d0d/message_8h_source.html">message.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d16/config_8h_source.html">config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d3c/util_8h_source.html">util.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/de2/portable_8h_source.html">portable.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/db2/image_8h_source.html">image.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d45/fileinfo_8h_source.html">fileinfo.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d9c/dir_8h_source.html">dir.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d21/regex_8h_source.html">regex.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/de1/linkedmap_8h_source.html">linkedmap.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">threadpool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d9c/latexgen_8h_source.html">latexgen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d16/debug_8h_source.html">debug.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/da1/doxygen_8h_source.html">doxygen.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d61/indexlist_8h_source.html">indexlist.h</a>&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Include dependency graph for formula.cpp:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/dc4/formula_8cpp__incl.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
</div>
<p><a href="../../d7/d5b/formula_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/da0/struct_formula_manager_1_1_private.html">FormulaManager::Private</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a21e0a716a4ba27ef05394fdd16276eec" id="r_a21e0a716a4ba27ef05394fdd16276eec"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21e0a716a4ba27ef05394fdd16276eec">determineInkscapeVersion</a> (const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;thisDir)</td></tr>
<tr class="separator:a21e0a716a4ba27ef05394fdd16276eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a704ccf2352fafe16ddf093abbaa6f7b4" id="r_a704ccf2352fafe16ddf093abbaa6f7b4"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a704ccf2352fafe16ddf093abbaa6f7b4">createDVIFile</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;fileName)</td></tr>
<tr class="separator:a704ccf2352fafe16ddf093abbaa6f7b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57b6802045cb92594d1f65e5b8821456" id="r_a57b6802045cb92594d1f65e5b8821456"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a57b6802045cb92594d1f65e5b8821456">createPostscriptFile</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;fileName, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, int pageIndex)</td></tr>
<tr class="separator:a57b6802045cb92594d1f65e5b8821456"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92954fc40f0e05879c1726f8d8207b1f" id="r_a92954fc40f0e05879c1726f8d8207b1f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a92954fc40f0e05879c1726f8d8207b1f">createEPSbboxFile</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase)</td></tr>
<tr class="separator:a92954fc40f0e05879c1726f8d8207b1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7978878c5e2989e9739423aa06f805a" id="r_ac7978878c5e2989e9739423aa06f805a"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7978878c5e2989e9739423aa06f805a">extractBoundingBox</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, int *x1, int *y1, int *x2, int *y2, double *x1hi, double *y1hi, double *x2hi, double *y2hi)</td></tr>
<tr class="separator:ac7978878c5e2989e9739423aa06f805a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6234dcdd2552e24e6910182b50633a58" id="r_a6234dcdd2552e24e6910182b50633a58"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6234dcdd2552e24e6910182b50633a58">updateFormulaSize</a> (<a class="el" href="../../d2/db0/class_formula.html">Formula</a> *formula, int x1, int y1, int x2, int y2)</td></tr>
<tr class="separator:a6234dcdd2552e24e6910182b50633a58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a751decfa83144bf64f1cd1cb492db3fe" id="r_a751decfa83144bf64f1cd1cb492db3fe"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a751decfa83144bf64f1cd1cb492db3fe">createCroppedPDF</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, int x1, int y1, int x2, int y2)</td></tr>
<tr class="separator:a751decfa83144bf64f1cd1cb492db3fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322962831f30dce16a3323a67d6e2c44" id="r_a322962831f30dce16a3323a67d6e2c44"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a322962831f30dce16a3323a67d6e2c44">createCroppedEPS</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase)</td></tr>
<tr class="separator:a322962831f30dce16a3323a67d6e2c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88d54d53a499dad6fda6617d2dc952e" id="r_ad88d54d53a499dad6fda6617d2dc952e"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad88d54d53a499dad6fda6617d2dc952e">createSVGFromPDF</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;outFile)</td></tr>
<tr class="separator:ad88d54d53a499dad6fda6617d2dc952e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c843eafd8ef0511d939fa5c6efc863f" id="r_a0c843eafd8ef0511d939fa5c6efc863f"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0c843eafd8ef0511d939fa5c6efc863f">createSVGFromPDFviaInkscape</a> (const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;thisDir, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;outFile)</td></tr>
<tr class="separator:a0c843eafd8ef0511d939fa5c6efc863f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa25bb4d45f6063809f1c8cd70038d94" id="r_afa25bb4d45f6063809f1c8cd70038d94"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#afa25bb4d45f6063809f1c8cd70038d94">updateEPSBoundingBox</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, int x1, int y1, int x2, int y2, double x1hi, double y1hi, double x2hi, double y2hi)</td></tr>
<tr class="separator:afa25bb4d45f6063809f1c8cd70038d94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0cc00317e5a4482a2e7df401bd480f38" id="r_a0cc00317e5a4482a2e7df401bd480f38"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0cc00317e5a4482a2e7df401bd480f38">createPNG</a> (const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formBase, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;outFile, double scaleFactor)</td></tr>
<tr class="separator:a0cc00317e5a4482a2e7df401bd480f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62cf6f788807da125c5433670c59d393" id="r_a62cf6f788807da125c5433670c59d393"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../d5/d75/containers_8h.html#ac8d53003529fb2d062d614077fe6857c">StringVector</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a62cf6f788807da125c5433670c59d393">generateFormula</a> (const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;thisDir, const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;formulaFileName, <a class="el" href="../../d2/db0/class_formula.html">Formula</a> *formula, int pageNum, int pageIndex, <a class="el" href="../../d0/d6c/class_formula_manager.html#aa538ca4ffea4dd937920ebdd41222e69">FormulaManager::Format</a> format, <a class="el" href="../../d0/d6c/class_formula_manager.html#ae7fe54b64ef2fa9eff2494118fab761e">FormulaManager::HighDPI</a> hd, <a class="el" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419">FormulaManager::Mode</a> mode)</td></tr>
<tr class="separator:a62cf6f788807da125c5433670c59d393"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2eb5aacd88293a8b5b1651f814592500" id="r_a2eb5aacd88293a8b5b1651f814592500"><td class="memItemLeft" align="right" valign="top">static std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2eb5aacd88293a8b5b1651f814592500">g_formulaUpdateMutex</a></td></tr>
<tr class="separator:a2eb5aacd88293a8b5b1651f814592500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45390d3758ea90a1a3501782f0e4e087" id="r_a45390d3758ea90a1a3501782f0e4e087"><td class="memItemLeft" align="right" valign="top">static std::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a45390d3758ea90a1a3501782f0e4e087">g_inkscapeDetectionMutex</a></td></tr>
<tr class="separator:a45390d3758ea90a1a3501782f0e4e087"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a322962831f30dce16a3323a67d6e2c44" name="a322962831f30dce16a3323a67d6e2c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322962831f30dce16a3323a67d6e2c44">&#9670;&#160;</a></span>createCroppedEPS()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createCroppedEPS </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00366">366</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  367</span>{</div>
<div class="line"><span class="lineno">  368</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  369</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  370</span>  <span class="comment">// crop the image to its bounding box</span></div>
<div class="line"><span class="lineno">  371</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-q -dBATCH -dNOPAUSE -P- -dNOSAFER -sDEVICE=eps2write&quot;</span></div>
<div class="line"><span class="lineno">  372</span>              <span class="stringliteral">&quot; -o %s_tmp.eps -f %s_tmp.ps&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  373</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>(),args)!=0)</div>
<div class="line"><span class="lineno">  374</span>  {</div>
<div class="line"><span class="lineno">  375</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running %s. Check your installation!\n&quot;</span>,<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>());</div>
<div class="line"><span class="lineno">  376</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  377</span>  }</div>
<div class="line"><span class="lineno">  378</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  379</span>}</div>
<div class="ttc" id="amessage_8h_html_aacd8f4b44e327860edbf38228d5918b0"><div class="ttname"><a href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a></div><div class="ttdeci">#define err(fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d0d/message_8h_source.html#l00084">message.h:84</a></div></div>
<div class="ttc" id="anamespace_portable_html_a4c4c43977edb27e33f873fbacf11d528"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a></div><div class="ttdeci">const char * ghostScriptCommand()</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00454">portable.cpp:454</a></div></div>
<div class="ttc" id="anamespace_portable_html_ab30a636186b72a67d57e9f7f1e917e99"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a></div><div class="ttdeci">int system(const QCString &amp;command, const QCString &amp;args, bool commandHasConsole=true)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00106">portable.cpp:106</a></div></div>
<div class="ttc" id="aqcstring_8h_html_a307ffe8cbc4a4aa695900441d1df49f3"><div class="ttname"><a href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a></div><div class="ttdeci">#define qsnprintf</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00049">qcstring.h:49</a></div></div>
<div class="ttc" id="aqcstring_8h_html_a9851ebb5ae2f65b4d2b1d08421edbfd2"><div class="ttname"><a href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a></div><div class="ttdeci">const char * qPrint(const char *s)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00661">qcstring.h:661</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00454">Portable::ghostScriptCommand()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a751decfa83144bf64f1cd1cb492db3fe" name="a751decfa83144bf64f1cd1cb492db3fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a751decfa83144bf64f1cd1cb492db3fe">&#9670;&#160;</a></span>createCroppedPDF()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createCroppedPDF </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00350">350</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  351</span>{</div>
<div class="line"><span class="lineno">  352</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  353</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  354</span>  <span class="comment">// crop the image to its bounding box</span></div>
<div class="line"><span class="lineno">  355</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-q -dBATCH -dNOPAUSE -P- -dNOSAFER -sDEVICE=pdfwrite&quot;</span></div>
<div class="line"><span class="lineno">  356</span>              <span class="stringliteral">&quot; -o %s_tmp.pdf -c \&quot;[/CropBox [%d %d %d %d] /PAGES pdfmark\&quot; -f %s_tmp.ps&quot;</span>,</div>
<div class="line"><span class="lineno">  357</span>      <a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),x1,y1,x2,y2,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  358</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>(),args)!=0)</div>
<div class="line"><span class="lineno">  359</span>  {</div>
<div class="line"><span class="lineno">  360</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running %s. Check your installation!\n&quot;</span>,<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>());</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  362</span>  }</div>
<div class="line"><span class="lineno">  363</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  364</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00454">Portable::ghostScriptCommand()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a704ccf2352fafe16ddf093abbaa6f7b4" name="a704ccf2352fafe16ddf093abbaa6f7b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a704ccf2352fafe16ddf093abbaa6f7b4">&#9670;&#160;</a></span>createDVIFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createDVIFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fileName</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00241">241</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  242</span>{</div>
<div class="line"><span class="lineno">  243</span>  <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> latexCmd = <span class="stringliteral">&quot;latex&quot;</span>;</div>
<div class="line"><span class="lineno">  244</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  245</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  246</span>  <span class="keywordtype">int</span> rerunCount=1;</div>
<div class="line"><span class="lineno">  247</span>  <span class="keywordflow">while</span> (rerunCount&lt;8)</div>
<div class="line"><span class="lineno">  248</span>  {</div>
<div class="line"><span class="lineno">  249</span>    <span class="comment">//printf(&quot;Running latex...\n&quot;);</span></div>
<div class="line"><span class="lineno">  250</span>    <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-interaction=batchmode %s &gt;%s&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(fileName),<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a>());</div>
<div class="line"><span class="lineno">  251</span>    <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(latexCmd,args)!=0) || (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(latexCmd,args)!=0))</div>
<div class="line"><span class="lineno">  252</span>    {</div>
<div class="line"><span class="lineno">  253</span>      <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running latex. Check your installation or look &quot;</span></div>
<div class="line"><span class="lineno">  254</span>          <span class="stringliteral">&quot;for typos in %s.tex and check %s.log!\n&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(fileName),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(fileName));</div>
<div class="line"><span class="lineno">  255</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  256</span>    }</div>
<div class="line"><span class="lineno">  257</span>    <span class="comment">// check the log file if we need to run latex again to resolve references</span></div>
<div class="line"><span class="lineno">  258</span>    <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> logFile = <a class="code hl_function" href="../../df/d2d/util_8cpp.html#a71d0079fa5936a41b6ff2d1ca5eb5480">fileToString</a>(fileName+<span class="stringliteral">&quot;.log&quot;</span>);</div>
<div class="line"><span class="lineno">  259</span>    <span class="keywordflow">if</span> (logFile.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a621c4090d69ad7d05ef8e5234376c3d8">isEmpty</a>() ||</div>
<div class="line"><span class="lineno">  260</span>        (logFile.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a0182ece6b76dad6475dafb53e2faaf10">find</a>(<span class="stringliteral">&quot;Rerun to get cross-references right&quot;</span>)==-1 &amp;&amp; logFile.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a0182ece6b76dad6475dafb53e2faaf10">find</a>(<span class="stringliteral">&quot;Rerun LaTeX&quot;</span>)==-1))</div>
<div class="line"><span class="lineno">  261</span>    {</div>
<div class="line"><span class="lineno">  262</span>      <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  263</span>    }</div>
<div class="line"><span class="lineno">  264</span>    rerunCount++;</div>
<div class="line"><span class="lineno">  265</span>  }</div>
<div class="line"><span class="lineno">  266</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  267</span>}</div>
<div class="ttc" id="aclass_q_c_string_html"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html">QCString</a></div><div class="ttdoc">This is an alternative implementation of QCString.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00100">qcstring.h:101</a></div></div>
<div class="ttc" id="aclass_q_c_string_html_a0182ece6b76dad6475dafb53e2faaf10"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html#a0182ece6b76dad6475dafb53e2faaf10">QCString::find</a></div><div class="ttdeci">int find(char c, int index=0, bool cs=TRUE) const</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d3e/qcstring_8cpp_source.html#l00043">qcstring.cpp:43</a></div></div>
<div class="ttc" id="aclass_q_c_string_html_a621c4090d69ad7d05ef8e5234376c3d8"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html#a621c4090d69ad7d05ef8e5234376c3d8">QCString::isEmpty</a></div><div class="ttdeci">bool isEmpty() const</div><div class="ttdoc">Returns TRUE iff the string is empty.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00150">qcstring.h:150</a></div></div>
<div class="ttc" id="anamespace_portable_html_aec45ff95f54eed28050e42d3638907cf"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a></div><div class="ttdeci">const char * devNull()</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00631">portable.cpp:631</a></div></div>
<div class="ttc" id="autil_8cpp_html_a71d0079fa5936a41b6ff2d1ca5eb5480"><div class="ttname"><a href="../../df/d2d/util_8cpp.html#a71d0079fa5936a41b6ff2d1ca5eb5480">fileToString</a></div><div class="ttdeci">QCString fileToString(const QCString &amp;name, bool filter, bool isSourceCode)</div><div class="ttdef"><b>Definition</b> <a href="../../df/d2d/util_8cpp_source.html#l01414">util.cpp:1414</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00631">Portable::devNull()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../df/d2d/util_8cpp_source.html#l01414">fileToString()</a>, <a class="el" href="../../d5/d3e/qcstring_8cpp_source.html#l00043">QCString::find()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00150">QCString::isEmpty()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00553">FormulaManager::createFormulasTexFile()</a>.</p>

</div>
</div>
<a id="a92954fc40f0e05879c1726f8d8207b1f" name="a92954fc40f0e05879c1726f8d8207b1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a92954fc40f0e05879c1726f8d8207b1f">&#9670;&#160;</a></span>createEPSbboxFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createEPSbboxFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00284">284</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  285</span>{</div>
<div class="line"><span class="lineno">  286</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  287</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  288</span>  <span class="comment">// extract the bounding box for the postscript file</span></div>
<div class="line"><span class="lineno">  289</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-q -dBATCH -dNOPAUSE -P- -dNOSAFER -sDEVICE=bbox %s_tmp.ps 2&gt;%s_tmp.epsi&quot;</span>,</div>
<div class="line"><span class="lineno">  290</span>      <a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  291</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>(),args)!=0)</div>
<div class="line"><span class="lineno">  292</span>  {</div>
<div class="line"><span class="lineno">  293</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running %s. Check your installation!\n&quot;</span>,<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>());</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  295</span>  }</div>
<div class="line"><span class="lineno">  296</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  297</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00454">Portable::ghostScriptCommand()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a0cc00317e5a4482a2e7df401bd480f38" name="a0cc00317e5a4482a2e7df401bd480f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0cc00317e5a4482a2e7df401bd480f38">&#9670;&#160;</a></span>createPNG()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createPNG </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>outFile</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>scaleFactor</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00459">459</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  460</span>{</div>
<div class="line"><span class="lineno">  461</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  462</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  463</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-q -dNOSAFER -dBATCH -dNOPAUSE -dEPSCrop -sDEVICE=pngalpha -dGraphicsAlphaBits=4 -dTextAlphaBits=4 &quot;</span></div>
<div class="line"><span class="lineno">  464</span>               <span class="stringliteral">&quot;-r%d -sOutputFile=%s %s_tmp_corr.eps&quot;</span>,<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(scaleFactor*72),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(outFile),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  465</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>(),args)!=0)</div>
<div class="line"><span class="lineno">  466</span>  {</div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running %s. Check your installation!\n&quot;</span>,<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a4c4c43977edb27e33f873fbacf11d528">Portable::ghostScriptCommand</a>());</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  469</span>  }</div>
<div class="line"><span class="lineno">  470</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  471</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00454">Portable::ghostScriptCommand()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a57b6802045cb92594d1f65e5b8821456" name="a57b6802045cb92594d1f65e5b8821456"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57b6802045cb92594d1f65e5b8821456">&#9670;&#160;</a></span>createPostscriptFile()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createPostscriptFile </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>fileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>pageIndex</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00269">269</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  270</span>{</div>
<div class="line"><span class="lineno">  271</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  272</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  273</span>  <span class="comment">// run dvips to convert the page with number pageIndex to an</span></div>
<div class="line"><span class="lineno">  274</span>  <span class="comment">// postscript file.</span></div>
<div class="line"><span class="lineno">  275</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-q -D 600 -n 1 -p %d -o %s_tmp.ps %s.dvi&quot;</span>,pageIndex,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(fileName));</div>
<div class="line"><span class="lineno">  276</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<span class="stringliteral">&quot;dvips&quot;</span>,args)!=0)</div>
<div class="line"><span class="lineno">  277</span>  {</div>
<div class="line"><span class="lineno">  278</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running dvips. Check your installation!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  279</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  280</span>  }</div>
<div class="line"><span class="lineno">  281</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  282</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="ad88d54d53a499dad6fda6617d2dc952e" name="ad88d54d53a499dad6fda6617d2dc952e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad88d54d53a499dad6fda6617d2dc952e">&#9670;&#160;</a></span>createSVGFromPDF()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createSVGFromPDF </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>outFile</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00381">381</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  382</span>{</div>
<div class="line"><span class="lineno">  383</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  384</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  385</span>  <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;%s_tmp.pdf %s&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(outFile));</div>
<div class="line"><span class="lineno">  386</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<span class="stringliteral">&quot;pdf2svg&quot;</span>,args)!=0)</div>
<div class="line"><span class="lineno">  387</span>  {</div>
<div class="line"><span class="lineno">  388</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running pdf2svg. Check your installation!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  389</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  390</span>  }</div>
<div class="line"><span class="lineno">  391</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  392</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a0c843eafd8ef0511d939fa5c6efc863f" name="a0c843eafd8ef0511d939fa5c6efc863f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c843eafd8ef0511d939fa5c6efc863f">&#9670;&#160;</a></span>createSVGFromPDFviaInkscape()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool createSVGFromPDFviaInkscape </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>thisDir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>outFile</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00394">394</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  395</span>{</div>
<div class="line"><span class="lineno">  396</span>  <span class="keyword">const</span> <span class="keywordtype">size_t</span> argsLen = 4096;</div>
<div class="line"><span class="lineno">  397</span>  <span class="keywordtype">char</span> args[argsLen];</div>
<div class="line"><span class="lineno">  398</span>  <span class="keywordtype">int</span> inkscapeVersion = <a class="code hl_function" href="#a21e0a716a4ba27ef05394fdd16276eec">determineInkscapeVersion</a>(thisDir);</div>
<div class="line"><span class="lineno">  399</span>  <span class="keywordflow">if</span> (inkscapeVersion == -1)</div>
<div class="line"><span class="lineno">  400</span>  {</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems determining the version of inkscape. Check your installation!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  402</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  403</span>  }</div>
<div class="line"><span class="lineno">  404</span>  <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inkscapeVersion == 0)</div>
<div class="line"><span class="lineno">  405</span>  {</div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;-l %s -z %s_tmp.pdf 2&gt;%s&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(outFile),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a>());</div>
<div class="line"><span class="lineno">  407</span>  }</div>
<div class="line"><span class="lineno">  408</span>  <span class="keywordflow">else</span> <span class="comment">// inkscapeVersion &gt;= 1</span></div>
<div class="line"><span class="lineno">  409</span>  {</div>
<div class="line"><span class="lineno">  410</span>    <a class="code hl_define" href="../../d7/d5c/qcstring_8h.html#a307ffe8cbc4a4aa695900441d1df49f3">qsnprintf</a>(args,argsLen,<span class="stringliteral">&quot;--export-type=svg --export-filename=%s %s_tmp.pdf 2&gt;%s&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(outFile),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a>());</div>
<div class="line"><span class="lineno">  411</span>  }</div>
<div class="line"><span class="lineno">  412</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<span class="stringliteral">&quot;inkscape&quot;</span>,args)!=0)</div>
<div class="line"><span class="lineno">  413</span>  {</div>
<div class="line"><span class="lineno">  414</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems running inkscape. Check your installation!\n&quot;</span>);</div>
<div class="line"><span class="lineno">  415</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  416</span>  }</div>
<div class="line"><span class="lineno">  417</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  418</span>}</div>
<div class="ttc" id="aformula_8cpp_html_a21e0a716a4ba27ef05394fdd16276eec"><div class="ttname"><a href="#a21e0a716a4ba27ef05394fdd16276eec">determineInkscapeVersion</a></div><div class="ttdeci">static int determineInkscapeVersion(const Dir &amp;thisDir)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00729">formula.cpp:729</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00729">determineInkscapeVersion()</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00631">Portable::devNull()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00049">qsnprintf</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a21e0a716a4ba27ef05394fdd16276eec" name="a21e0a716a4ba27ef05394fdd16276eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21e0a716a4ba27ef05394fdd16276eec">&#9670;&#160;</a></span>determineInkscapeVersion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int determineInkscapeVersion </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>thisDir</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00729">729</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  730</span>{</div>
<div class="line"><span class="lineno">  731</span>  std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="#a45390d3758ea90a1a3501782f0e4e087">g_inkscapeDetectionMutex</a>);</div>
<div class="line"><span class="lineno">  732</span>  <span class="comment">// The command line interface (CLI) of Inkscape 1.0 has changed in comparison to</span></div>
<div class="line"><span class="lineno">  733</span>  <span class="comment">// previous versions. In order to invokine Inkscape, the used version is detected</span></div>
<div class="line"><span class="lineno">  734</span>  <span class="comment">// and based on the version the right syntax of the CLI is chosen.</span></div>
<div class="line"><span class="lineno">  735</span>  <span class="keyword">static</span> <span class="keywordtype">int</span> inkscapeVersion = -2;</div>
<div class="line"><span class="lineno">  736</span>  <span class="keywordflow">if</span> (inkscapeVersion == -2) <span class="comment">// initial one time version check</span></div>
<div class="line"><span class="lineno">  737</span>  {</div>
<div class="line"><span class="lineno">  738</span>    <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> inkscapeVersionFile = <span class="stringliteral">&quot;inkscape_version&quot;</span> ;</div>
<div class="line"><span class="lineno">  739</span>    inkscapeVersion = -1;</div>
<div class="line"><span class="lineno">  740</span>    <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> args = <span class="stringliteral">&quot;-z --version &gt;&quot;</span>+inkscapeVersionFile+<span class="stringliteral">&quot; 2&gt;&quot;</span>+<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a>();</div>
<div class="line"><span class="lineno">  741</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<span class="stringliteral">&quot;inkscape&quot;</span>,args)!=0)</div>
<div class="line"><span class="lineno">  742</span>    {</div>
<div class="line"><span class="lineno">  743</span>      <span class="comment">// looks like the old syntax gave problems, lets try the new syntax</span></div>
<div class="line"><span class="lineno">  744</span>      args = <span class="stringliteral">&quot; --version &gt;&quot;</span>+inkscapeVersionFile+<span class="stringliteral">&quot; 2&gt;&quot;</span>+<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#aec45ff95f54eed28050e42d3638907cf">Portable::devNull</a>();</div>
<div class="line"><span class="lineno">  745</span>      <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#ab30a636186b72a67d57e9f7f1e917e99">Portable::system</a>(<span class="stringliteral">&quot;inkscape&quot;</span>,args)!=0)</div>
<div class="line"><span class="lineno">  746</span>      {</div>
<div class="line"><span class="lineno">  747</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  748</span>      }</div>
<div class="line"><span class="lineno">  749</span>    }</div>
<div class="line"><span class="lineno">  750</span>    <span class="comment">// read version file and determine major version</span></div>
<div class="line"><span class="lineno">  751</span>    std::ifstream inkscapeVersionIn = <a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a0579eaf8c245a77f1e804a3cf1b0aa73">Portable::openInputStream</a>(inkscapeVersionFile);</div>
<div class="line"><span class="lineno">  752</span>    <span class="keywordflow">if</span> (inkscapeVersionIn.is_open())</div>
<div class="line"><span class="lineno">  753</span>    {</div>
<div class="line"><span class="lineno">  754</span>      std::string line;</div>
<div class="line"><span class="lineno">  755</span>      <span class="keywordflow">while</span> (getline(inkscapeVersionIn,line))</div>
<div class="line"><span class="lineno">  756</span>      {</div>
<div class="line"><span class="lineno">  757</span>        <span class="keywordtype">size_t</span> dotPos = line.find(<span class="charliteral">&#39;.&#39;</span>);</div>
<div class="line"><span class="lineno">  758</span>        <span class="keywordflow">if</span> (line.rfind(<span class="stringliteral">&quot;Inkscape &quot;</span>,0)==0 &amp;&amp; dotPos&gt;0)</div>
<div class="line"><span class="lineno">  759</span>        {</div>
<div class="line"><span class="lineno">  760</span>          <span class="comment">// get major version</span></div>
<div class="line"><span class="lineno">  761</span>          inkscapeVersion = std::stoi(line.substr(9,dotPos-9));</div>
<div class="line"><span class="lineno">  762</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  763</span>        }</div>
<div class="line"><span class="lineno">  764</span>      }</div>
<div class="line"><span class="lineno">  765</span>      inkscapeVersionIn.close();</div>
<div class="line"><span class="lineno">  766</span>    }</div>
<div class="line"><span class="lineno">  767</span>    <span class="keywordflow">else</span> <span class="comment">// failed to open version file</span></div>
<div class="line"><span class="lineno">  768</span>    {</div>
<div class="line"><span class="lineno">  769</span>      <span class="keywordflow">return</span> -1;</div>
<div class="line"><span class="lineno">  770</span>    }</div>
<div class="line"><span class="lineno">  771</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../da/d7d/class_debug.html#a96e9401783e852c91f341b3f98198061">Debug::isFlagSet</a>(<a class="code hl_enumvalue" href="../../da/d7d/class_debug.html#a1c3f4696cf44a23f41e034323c426f7daaa4539102b2cba0227fb56f4fd90e997">Debug::Formula</a>))</div>
<div class="line"><span class="lineno">  772</span>    {</div>
<div class="line"><span class="lineno">  773</span>      thisDir.<a class="code hl_function" href="../../d2/dc2/class_dir.html#a5a64060f8e1731e8f00da7e8f7051e4b">remove</a>(inkscapeVersionFile.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>());</div>
<div class="line"><span class="lineno">  774</span>    }</div>
<div class="line"><span class="lineno">  775</span>  }</div>
<div class="line"><span class="lineno">  776</span>  <span class="keywordflow">return</span> inkscapeVersion;</div>
<div class="line"><span class="lineno">  777</span>}</div>
<div class="ttc" id="aclass_debug_html_a1c3f4696cf44a23f41e034323c426f7daaa4539102b2cba0227fb56f4fd90e997"><div class="ttname"><a href="../../da/d7d/class_debug.html#a1c3f4696cf44a23f41e034323c426f7daaa4539102b2cba0227fb56f4fd90e997">Debug::Formula</a></div><div class="ttdeci">@ Formula</div><div class="ttdef"><b>Definition</b> <a href="../../db/d16/debug_8h_source.html#l00032">debug.h:32</a></div></div>
<div class="ttc" id="aclass_debug_html_a96e9401783e852c91f341b3f98198061"><div class="ttname"><a href="../../da/d7d/class_debug.html#a96e9401783e852c91f341b3f98198061">Debug::isFlagSet</a></div><div class="ttdeci">static bool isFlagSet(const DebugMask mask)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d00/debug_8cpp_source.html#l00135">debug.cpp:135</a></div></div>
<div class="ttc" id="aclass_dir_html_a5a64060f8e1731e8f00da7e8f7051e4b"><div class="ttname"><a href="../../d2/dc2/class_dir.html#a5a64060f8e1731e8f00da7e8f7051e4b">Dir::remove</a></div><div class="ttdeci">bool remove(const std::string &amp;path, bool acceptsAbsPath=true) const</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d48/dir_8cpp_source.html#l00314">dir.cpp:314</a></div></div>
<div class="ttc" id="aclass_q_c_string_html_a875e9ad762554ef12f3ed69b015bb245"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">QCString::str</a></div><div class="ttdeci">const std::string &amp; str() const</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00526">qcstring.h:526</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a45390d3758ea90a1a3501782f0e4e087"><div class="ttname"><a href="#a45390d3758ea90a1a3501782f0e4e087">g_inkscapeDetectionMutex</a></div><div class="ttdeci">static std::mutex g_inkscapeDetectionMutex</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00725">formula.cpp:725</a></div></div>
<div class="ttc" id="anamespace_portable_html_a0579eaf8c245a77f1e804a3cf1b0aa73"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#a0579eaf8c245a77f1e804a3cf1b0aa73">Portable::openInputStream</a></div><div class="ttdeci">std::ifstream openInputStream(const QCString &amp;name, bool binary=false, bool openAtEnd=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00676">portable.cpp:676</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00631">Portable::devNull()</a>, <a class="el" href="../../db/d16/debug_8h_source.html#l00032">Debug::Formula</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00725">g_inkscapeDetectionMutex</a>, <a class="el" href="../../d1/d00/debug_8cpp_source.html#l00135">Debug::isFlagSet()</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00676">Portable::openInputStream()</a>, <a class="el" href="../../d3/d48/dir_8cpp_source.html#l00314">Dir::remove()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00526">QCString::str()</a>, and <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00106">Portable::system()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00394">createSVGFromPDFviaInkscape()</a>.</p>

</div>
</div>
<a id="ac7978878c5e2989e9739423aa06f805a" name="ac7978878c5e2989e9739423aa06f805a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7978878c5e2989e9739423aa06f805a">&#9670;&#160;</a></span>extractBoundingBox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool extractBoundingBox </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>x1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>y1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>x2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *</td>          <td class="paramname"><span class="paramname"><em>y2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>x1hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>y1hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>x2hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>y2hi</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00299">299</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  302</span>{</div>
<div class="line"><span class="lineno">  303</span>  <a class="code hl_class" href="../../d0/da1/class_file_info.html">FileInfo</a> fi((formBase+<span class="stringliteral">&quot;_tmp.epsi&quot;</span>).str());</div>
<div class="line"><span class="lineno">  304</span>  <span class="keywordflow">if</span> (fi.exists())</div>
<div class="line"><span class="lineno">  305</span>  {</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> eps = <a class="code hl_function" href="../../df/d2d/util_8cpp.html#a71d0079fa5936a41b6ff2d1ca5eb5480">fileToString</a>(formBase+<span class="stringliteral">&quot;_tmp.epsi&quot;</span>);</div>
<div class="line"><span class="lineno">  307</span>    <span class="keywordtype">int</span> i = eps.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a0182ece6b76dad6475dafb53e2faaf10">find</a>(<span class="stringliteral">&quot;%%BoundingBox:&quot;</span>);</div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">if</span> (i!=-1)</div>
<div class="line"><span class="lineno">  309</span>    {</div>
<div class="line"><span class="lineno">  310</span>      sscanf(eps.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#ac3aa3ac1a1c36d3305eba22a2eb0d098">data</a>()+i,<span class="stringliteral">&quot;%%%%BoundingBox:%d %d %d %d&quot;</span>,x1,y1,x2,y2);</div>
<div class="line"><span class="lineno">  311</span>    }</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  313</span>    {</div>
<div class="line"><span class="lineno">  314</span>      <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Couldn&#39;t extract bounding box from %s_tmp.epsi\n&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  316</span>    }</div>
<div class="line"><span class="lineno">  317</span>    i = eps.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a0182ece6b76dad6475dafb53e2faaf10">find</a>(<span class="stringliteral">&quot;%%HiResBoundingBox:&quot;</span>);</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">if</span> (i!=-1)</div>
<div class="line"><span class="lineno">  319</span>    {</div>
<div class="line"><span class="lineno">  320</span>      sscanf(eps.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#ac3aa3ac1a1c36d3305eba22a2eb0d098">data</a>()+i,<span class="stringliteral">&quot;%%%%HiResBoundingBox:%lf %lf %lf %lf&quot;</span>,x1hi,y1hi,x2hi,y2hi);</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="line"><span class="lineno">  322</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  323</span>    {</div>
<div class="line"><span class="lineno">  324</span>      <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Couldn&#39;t extract high resolution bounding box from %s_tmp.epsi\n&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  325</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  326</span>    }</div>
<div class="line"><span class="lineno">  327</span>  }</div>
<div class="line"><span class="lineno">  328</span>  <span class="comment">//printf(&quot;Bounding box [%d %d %d %d]\n&quot;,x1,y1,x2,y2);</span></div>
<div class="line"><span class="lineno">  329</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  330</span>}</div>
<div class="ttc" id="aclass_file_info_html"><div class="ttname"><a href="../../d0/da1/class_file_info.html">FileInfo</a></div><div class="ttdoc">Minimal replacement for QFileInfo.</div><div class="ttdef"><b>Definition</b> <a href="../../df/d45/fileinfo_8h_source.html#l00022">fileinfo.h:23</a></div></div>
<div class="ttc" id="aclass_q_c_string_html_ac3aa3ac1a1c36d3305eba22a2eb0d098"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html#ac3aa3ac1a1c36d3305eba22a2eb0d098">QCString::data</a></div><div class="ttdeci">const char * data() const</div><div class="ttdoc">Returns a pointer to the contents of the string in the form of a 0-terminated C string.</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5c/qcstring_8h_source.html#l00159">qcstring.h:159</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00159">QCString::data()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../db/dbc/fileinfo_8cpp_source.html#l00030">FileInfo::exists()</a>, <a class="el" href="../../df/d2d/util_8cpp_source.html#l01414">fileToString()</a>, <a class="el" href="../../d5/d3e/qcstring_8cpp_source.html#l00043">QCString::find()</a>, and <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>, and <a class="el" href="../../d1/dfe/dotrunner_8cpp_source.html#l00130">DotRunner::readBoundingBox()</a>.</p>

</div>
</div>
<a id="a62cf6f788807da125c5433670c59d393" name="a62cf6f788807da125c5433670c59d393"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62cf6f788807da125c5433670c59d393">&#9670;&#160;</a></span>generateFormula()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../d5/d75/containers_8h.html#ac8d53003529fb2d062d614077fe6857c">StringVector</a> generateFormula </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/dc2/class_dir.html">Dir</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>thisDir</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formulaFileName</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/db0/class_formula.html">Formula</a> *</td>          <td class="paramname"><span class="paramname"><em>formula</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>pageNum</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>pageIndex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d6c/class_formula_manager.html#aa538ca4ffea4dd937920ebdd41222e69">FormulaManager::Format</a></td>          <td class="paramname"><span class="paramname"><em>format</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d6c/class_formula_manager.html#ae7fe54b64ef2fa9eff2494118fab761e">FormulaManager::HighDPI</a></td>          <td class="paramname"><span class="paramname"><em>hd</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419">FormulaManager::Mode</a></td>          <td class="paramname"><span class="paramname"><em>mode</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">473</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  475</span>{</div>
<div class="line"><span class="lineno">  476</span>  <a class="code hl_typedef" href="../../d5/d75/containers_8h.html#ac8d53003529fb2d062d614077fe6857c">StringVector</a> tempFiles;</div>
<div class="line"><span class="lineno">  477</span>  <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> outputFile;</div>
<div class="line"><span class="lineno">  478</span>  outputFile.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#aa2dccf89cb25346c3ee81d75aa5859da">sprintf</a>(<span class="stringliteral">&quot;form_%d%s.%s&quot;</span>,pageNum, mode==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82">FormulaManager::Mode::Light</a>?<span class="stringliteral">&quot;&quot;</span>:<span class="stringliteral">&quot;_dark&quot;</span>, format==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#aa538ca4ffea4dd937920ebdd41222e69a57dea6f5039281b7fee517fc43bf3110">FormulaManager::Format::Vector</a>?<span class="stringliteral">&quot;svg&quot;</span>:<span class="stringliteral">&quot;png&quot;</span>);</div>
<div class="line"><span class="lineno">  479</span>  <a class="code hl_function" href="../../d8/d6a/message_8cpp.html#aba549a028419cd48a3f373037c2c57eb">msg</a>(<span class="stringliteral">&quot;Generating image %s for formula\n&quot;</span>,<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(outputFile));</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>  <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> formBase;</div>
<div class="line"><span class="lineno">  482</span>  formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#aa2dccf89cb25346c3ee81d75aa5859da">sprintf</a>(<span class="stringliteral">&quot;_form%d%s&quot;</span>,pageNum,mode==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82">FormulaManager::Mode::Light</a>?<span class="stringliteral">&quot;&quot;</span>:<span class="stringliteral">&quot;_dark&quot;</span>);</div>
<div class="line"><span class="lineno">  483</span> </div>
<div class="line"><span class="lineno">  484</span>  <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a57b6802045cb92594d1f65e5b8821456">createPostscriptFile</a>(formulaFileName,formBase,pageIndex)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  485</span> </div>
<div class="line"><span class="lineno">  486</span>  <span class="keywordtype">int</span> x1=0,y1=0,x2=0,y2=0;</div>
<div class="line"><span class="lineno">  487</span>  <span class="keywordtype">double</span> x1hi=0.0,y1hi=0.0,x2hi=0.0,y2hi=0.0;</div>
<div class="line"><span class="lineno">  488</span>  <span class="keywordflow">if</span> (mode==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82">FormulaManager::Mode::Light</a>)</div>
<div class="line"><span class="lineno">  489</span>  {</div>
<div class="line"><span class="lineno">  490</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a92954fc40f0e05879c1726f8d8207b1f">createEPSbboxFile</a>(formBase)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  491</span>    <span class="comment">// extract the bounding box info from the generated .epsi file</span></div>
<div class="line"><span class="lineno">  492</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#ac7978878c5e2989e9739423aa06f805a">extractBoundingBox</a>(formBase,&amp;x1,&amp;y1,&amp;x2,&amp;y2,&amp;x1hi,&amp;y1hi,&amp;x2hi,&amp;y2hi)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  493</span>  }</div>
<div class="line"><span class="lineno">  494</span>  <span class="keywordflow">else</span> <span class="comment">// for dark images the bounding box is wrong (includes the black) so</span></div>
<div class="line"><span class="lineno">  495</span>       <span class="comment">// use the bounding box of the light image instead.</span></div>
<div class="line"><span class="lineno">  496</span>  {</div>
<div class="line"><span class="lineno">  497</span>    <a class="code hl_class" href="../../d9/d45/class_q_c_string.html">QCString</a> formBaseLight;</div>
<div class="line"><span class="lineno">  498</span>    formBaseLight.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#aa2dccf89cb25346c3ee81d75aa5859da">sprintf</a>(<span class="stringliteral">&quot;_form%d&quot;</span>,pageNum);</div>
<div class="line"><span class="lineno">  499</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#ac7978878c5e2989e9739423aa06f805a">extractBoundingBox</a>(formBaseLight,&amp;x1,&amp;y1,&amp;x2,&amp;y2,&amp;x1hi,&amp;y1hi,&amp;x2hi,&amp;y2hi)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  500</span>  }</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>  <span class="comment">// convert the corrected EPS to a bitmap</span></div>
<div class="line"><span class="lineno">  503</span>  <span class="keywordtype">double</span> scaleFactor = <a class="code hl_function" href="#a6234dcdd2552e24e6910182b50633a58">updateFormulaSize</a>(formula,x1,y1,x2,y2);</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>  <span class="keywordflow">if</span> (format==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#aa538ca4ffea4dd937920ebdd41222e69a57dea6f5039281b7fee517fc43bf3110">FormulaManager::Format::Vector</a>)</div>
<div class="line"><span class="lineno">  506</span>  {</div>
<div class="line"><span class="lineno">  507</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a751decfa83144bf64f1cd1cb492db3fe">createCroppedPDF</a>(formBase,x1,y1,x2,y2)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  508</span> </div>
<div class="line"><span class="lineno">  509</span>    <span class="comment">// if we have pdf2svg available use it to create a SVG image</span></div>
<div class="line"><span class="lineno">  510</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a39228795dec07d8121645b0348e91712">Portable::checkForExecutable</a>(<span class="stringliteral">&quot;pdf2svg&quot;</span>))</div>
<div class="line"><span class="lineno">  511</span>    {</div>
<div class="line"><span class="lineno">  512</span>      <a class="code hl_function" href="#ad88d54d53a499dad6fda6617d2dc952e">createSVGFromPDF</a>(formBase,outputFile);</div>
<div class="line"><span class="lineno">  513</span>    }</div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a39228795dec07d8121645b0348e91712">Portable::checkForExecutable</a>(<span class="stringliteral">&quot;inkscape&quot;</span>)) <span class="comment">// alternative is to use inkscape</span></div>
<div class="line"><span class="lineno">  515</span>    {</div>
<div class="line"><span class="lineno">  516</span>      <a class="code hl_function" href="#a0c843eafd8ef0511d939fa5c6efc863f">createSVGFromPDFviaInkscape</a>(thisDir,formBase,outputFile);</div>
<div class="line"><span class="lineno">  517</span>    }</div>
<div class="line"><span class="lineno">  518</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  519</span>    {</div>
<div class="line"><span class="lineno">  520</span>      <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Neither &#39;pdf2svg&#39; nor &#39;inkscape&#39; present for conversion of formula to &#39;svg&#39;\n&quot;</span>);</div>
<div class="line"><span class="lineno">  521</span>      <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  522</span>    }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    tempFiles.push_back(formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>()+<span class="stringliteral">&quot;_tmp.pdf&quot;</span>);</div>
<div class="line"><span class="lineno">  525</span>  }</div>
<div class="line"><span class="lineno">  526</span>  <span class="keywordflow">else</span> <span class="comment">// format==FormulaManager::Format::Bitmap</span></div>
<div class="line"><span class="lineno">  527</span>  {</div>
<div class="line"><span class="lineno">  528</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a322962831f30dce16a3323a67d6e2c44">createCroppedEPS</a>(formBase)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#afa25bb4d45f6063809f1c8cd70038d94">updateEPSBoundingBox</a>(formBase,x1,y1,x2,y2,x1hi,y1hi,x2hi,y2hi)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>    <span class="keywordflow">if</span> (hd==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#ae7fe54b64ef2fa9eff2494118fab761ea521c36a31c2762741cf0f8890cbe05e3">FormulaManager::HighDPI::On</a>) <span class="comment">// for high DPI display it looks much better if the</span></div>
<div class="line"><span class="lineno">  533</span>                                         <span class="comment">// image resolution is higher than the display resolution</span></div>
<div class="line"><span class="lineno">  534</span>    {</div>
<div class="line"><span class="lineno">  535</span>      scaleFactor*=2;</div>
<div class="line"><span class="lineno">  536</span>    }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>    <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a0cc00317e5a4482a2e7df401bd480f38">createPNG</a>(formBase,outputFile,scaleFactor)) <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  539</span> </div>
<div class="line"><span class="lineno">  540</span>    tempFiles.push_back(formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>()+<span class="stringliteral">&quot;_tmp.eps&quot;</span>);</div>
<div class="line"><span class="lineno">  541</span>    tempFiles.push_back(formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>()+<span class="stringliteral">&quot;_tmp_corr.eps&quot;</span>);</div>
<div class="line"><span class="lineno">  542</span>  }</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>  <span class="comment">// remove intermediate image files</span></div>
<div class="line"><span class="lineno">  545</span>  tempFiles.push_back(formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>()+<span class="stringliteral">&quot;_tmp.ps&quot;</span>);</div>
<div class="line"><span class="lineno">  546</span>  <span class="keywordflow">if</span> (mode==<a class="code hl_enumvalue" href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82">FormulaManager::Mode::Light</a>)</div>
<div class="line"><span class="lineno">  547</span>  {</div>
<div class="line"><span class="lineno">  548</span>    tempFiles.push_back(formBase.<a class="code hl_function" href="../../d9/d45/class_q_c_string.html#a875e9ad762554ef12f3ed69b015bb245">str</a>()+<span class="stringliteral">&quot;_tmp.epsi&quot;</span>);</div>
<div class="line"><span class="lineno">  549</span>  }</div>
<div class="line"><span class="lineno">  550</span>  <span class="keywordflow">return</span> tempFiles;</div>
<div class="line"><span class="lineno">  551</span>}</div>
<div class="ttc" id="aclass_formula_manager_html_a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82"><div class="ttname"><a href="../../d0/d6c/class_formula_manager.html#a417a154a8ce0abdc51353d4475005419a9914a0ce04a7b7b6a8e39bec55064b82">FormulaManager::Mode::Light</a></div><div class="ttdeci">@ Light</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9a/formula_8h_source.html#l00081">formula.h:81</a></div></div>
<div class="ttc" id="aclass_formula_manager_html_aa538ca4ffea4dd937920ebdd41222e69a57dea6f5039281b7fee517fc43bf3110"><div class="ttname"><a href="../../d0/d6c/class_formula_manager.html#aa538ca4ffea4dd937920ebdd41222e69a57dea6f5039281b7fee517fc43bf3110">FormulaManager::Format::Vector</a></div><div class="ttdeci">@ Vector</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9a/formula_8h_source.html#l00079">formula.h:79</a></div></div>
<div class="ttc" id="aclass_formula_manager_html_ae7fe54b64ef2fa9eff2494118fab761ea521c36a31c2762741cf0f8890cbe05e3"><div class="ttname"><a href="../../d0/d6c/class_formula_manager.html#ae7fe54b64ef2fa9eff2494118fab761ea521c36a31c2762741cf0f8890cbe05e3">FormulaManager::HighDPI::On</a></div><div class="ttdeci">@ On</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9a/formula_8h_source.html#l00080">formula.h:80</a></div></div>
<div class="ttc" id="aclass_q_c_string_html_aa2dccf89cb25346c3ee81d75aa5859da"><div class="ttname"><a href="../../d9/d45/class_q_c_string.html#aa2dccf89cb25346c3ee81d75aa5859da">QCString::sprintf</a></div><div class="ttdeci">QCString &amp; sprintf(const char *format,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d3e/qcstring_8cpp_source.html#l00029">qcstring.cpp:29</a></div></div>
<div class="ttc" id="acontainers_8h_html_ac8d53003529fb2d062d614077fe6857c"><div class="ttname"><a href="../../d5/d75/containers_8h.html#ac8d53003529fb2d062d614077fe6857c">StringVector</a></div><div class="ttdeci">std::vector&lt; std::string &gt; StringVector</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d75/containers_8h_source.html#l00033">containers.h:33</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a0c843eafd8ef0511d939fa5c6efc863f"><div class="ttname"><a href="#a0c843eafd8ef0511d939fa5c6efc863f">createSVGFromPDFviaInkscape</a></div><div class="ttdeci">static bool createSVGFromPDFviaInkscape(const Dir &amp;thisDir, const QCString &amp;formBase, const QCString &amp;outFile)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00394">formula.cpp:394</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a0cc00317e5a4482a2e7df401bd480f38"><div class="ttname"><a href="#a0cc00317e5a4482a2e7df401bd480f38">createPNG</a></div><div class="ttdeci">static bool createPNG(const QCString &amp;formBase, const QCString &amp;outFile, double scaleFactor)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00459">formula.cpp:459</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a322962831f30dce16a3323a67d6e2c44"><div class="ttname"><a href="#a322962831f30dce16a3323a67d6e2c44">createCroppedEPS</a></div><div class="ttdeci">static bool createCroppedEPS(const QCString &amp;formBase)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00366">formula.cpp:366</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a57b6802045cb92594d1f65e5b8821456"><div class="ttname"><a href="#a57b6802045cb92594d1f65e5b8821456">createPostscriptFile</a></div><div class="ttdeci">static bool createPostscriptFile(const QCString &amp;fileName, const QCString &amp;formBase, int pageIndex)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00269">formula.cpp:269</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a6234dcdd2552e24e6910182b50633a58"><div class="ttname"><a href="#a6234dcdd2552e24e6910182b50633a58">updateFormulaSize</a></div><div class="ttdeci">static double updateFormulaSize(Formula *formula, int x1, int y1, int x2, int y2)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00334">formula.cpp:334</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a751decfa83144bf64f1cd1cb492db3fe"><div class="ttname"><a href="#a751decfa83144bf64f1cd1cb492db3fe">createCroppedPDF</a></div><div class="ttdeci">static bool createCroppedPDF(const QCString &amp;formBase, int x1, int y1, int x2, int y2)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00350">formula.cpp:350</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a92954fc40f0e05879c1726f8d8207b1f"><div class="ttname"><a href="#a92954fc40f0e05879c1726f8d8207b1f">createEPSbboxFile</a></div><div class="ttdeci">static bool createEPSbboxFile(const QCString &amp;formBase)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00284">formula.cpp:284</a></div></div>
<div class="ttc" id="aformula_8cpp_html_ac7978878c5e2989e9739423aa06f805a"><div class="ttname"><a href="#ac7978878c5e2989e9739423aa06f805a">extractBoundingBox</a></div><div class="ttdeci">static bool extractBoundingBox(const QCString &amp;formBase, int *x1, int *y1, int *x2, int *y2, double *x1hi, double *y1hi, double *x2hi, double *y2hi)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00299">formula.cpp:299</a></div></div>
<div class="ttc" id="aformula_8cpp_html_ad88d54d53a499dad6fda6617d2dc952e"><div class="ttname"><a href="#ad88d54d53a499dad6fda6617d2dc952e">createSVGFromPDF</a></div><div class="ttdeci">static bool createSVGFromPDF(const QCString &amp;formBase, const QCString &amp;outFile)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00381">formula.cpp:381</a></div></div>
<div class="ttc" id="aformula_8cpp_html_afa25bb4d45f6063809f1c8cd70038d94"><div class="ttname"><a href="#afa25bb4d45f6063809f1c8cd70038d94">updateEPSBoundingBox</a></div><div class="ttdeci">static bool updateEPSBoundingBox(const QCString &amp;formBase, int x1, int y1, int x2, int y2, double x1hi, double y1hi, double x2hi, double y2hi)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00421">formula.cpp:421</a></div></div>
<div class="ttc" id="amessage_8cpp_html_aba549a028419cd48a3f373037c2c57eb"><div class="ttname"><a href="../../d8/d6a/message_8cpp.html#aba549a028419cd48a3f373037c2c57eb">msg</a></div><div class="ttdeci">void msg(const char *fmt,...)</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d6a/message_8cpp_source.html#l00098">message.cpp:98</a></div></div>
<div class="ttc" id="anamespace_portable_html_a39228795dec07d8121645b0348e91712"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#a39228795dec07d8121645b0348e91712">Portable::checkForExecutable</a></div><div class="ttdeci">bool checkForExecutable(const QCString &amp;fileName)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00440">portable.cpp:440</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00440">Portable::checkForExecutable()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00366">createCroppedEPS()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00350">createCroppedPDF()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00284">createEPSbboxFile()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00459">createPNG()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00269">createPostscriptFile()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00381">createSVGFromPDF()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00394">createSVGFromPDFviaInkscape()</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00299">extractBoundingBox()</a>, <a class="el" href="../../d3/d9a/formula_8h_source.html#l00081">FormulaManager::Light</a>, <a class="el" href="../../d8/d6a/message_8cpp_source.html#l00098">msg()</a>, <a class="el" href="../../d3/d9a/formula_8h_source.html#l00080">FormulaManager::On</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>, <a class="el" href="../../d5/d3e/qcstring_8cpp_source.html#l00029">QCString::sprintf()</a>, <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00526">QCString::str()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00421">updateEPSBoundingBox()</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00334">updateFormulaSize()</a>, and <a class="el" href="../../d3/d9a/formula_8h_source.html#l00079">FormulaManager::Vector</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00553">FormulaManager::createFormulasTexFile()</a>.</p>

</div>
</div>
<a id="afa25bb4d45f6063809f1c8cd70038d94" name="afa25bb4d45f6063809f1c8cd70038d94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa25bb4d45f6063809f1c8cd70038d94">&#9670;&#160;</a></span>updateEPSBoundingBox()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool updateEPSBoundingBox </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d9/d45/class_q_c_string.html">QCString</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>formBase</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>x1hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>y1hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>x2hi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double</td>          <td class="paramname"><span class="paramname"><em>y2hi</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00421">421</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  424</span>{</div>
<div class="line"><span class="lineno">  425</span>  <span class="comment">// read back %s_tmp.eps and replace</span></div>
<div class="line"><span class="lineno">  426</span>  <span class="comment">// bounding box values with x1,y1,x2,y2 and remove the HiResBoundingBox</span></div>
<div class="line"><span class="lineno">  427</span>  std::ifstream epsIn  = <a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a0579eaf8c245a77f1e804a3cf1b0aa73">Portable::openInputStream</a>(formBase+<span class="stringliteral">&quot;_tmp.eps&quot;</span>);</div>
<div class="line"><span class="lineno">  428</span>  std::ofstream epsOut = <a class="code hl_function" href="../../d7/d6f/namespace_portable.html#a230fceefc8f9abd1e8d4be71d7eef281">Portable::openOutputStream</a>(formBase+<span class="stringliteral">&quot;_tmp_corr.eps&quot;</span>);</div>
<div class="line"><span class="lineno">  429</span>  <span class="keywordflow">if</span> (epsIn.is_open() &amp;&amp; epsOut.is_open())</div>
<div class="line"><span class="lineno">  430</span>  {</div>
<div class="line"><span class="lineno">  431</span>    std::string line;</div>
<div class="line"><span class="lineno">  432</span>    <span class="keywordflow">while</span> (getline(epsIn,line))</div>
<div class="line"><span class="lineno">  433</span>    {</div>
<div class="line"><span class="lineno">  434</span>      <span class="keywordflow">if</span> (line.rfind(<span class="stringliteral">&quot;%%BoundingBox&quot;</span>,0)==0)</div>
<div class="line"><span class="lineno">  435</span>      {</div>
<div class="line"><span class="lineno">  436</span>        epsOut &lt;&lt; <span class="stringliteral">&quot;%%BoundingBox: &quot;</span> &lt;&lt; std::max(0,x1-1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; std::max(0,y1-1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (x2+1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (y2+1) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  437</span>      }</div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line.rfind(<span class="stringliteral">&quot;%%HiResBoundingBox&quot;</span>,0)==0)</div>
<div class="line"><span class="lineno">  439</span>      {</div>
<div class="line"><span class="lineno">  440</span>        epsOut &lt;&lt; <span class="stringliteral">&quot;%%HiResBoundingBox: &quot;</span> &lt;&lt; std::max(0.0,x1hi-1.0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; std::max(0.0,y1hi-1.0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (x2hi+1.0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; (y2hi+1.0) &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  441</span>      }</div>
<div class="line"><span class="lineno">  442</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  443</span>      {</div>
<div class="line"><span class="lineno">  444</span>        epsOut &lt;&lt; line &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno">  445</span>      }</div>
<div class="line"><span class="lineno">  446</span>    }</div>
<div class="line"><span class="lineno">  447</span>    epsIn.close();</div>
<div class="line"><span class="lineno">  448</span>    epsOut.close();</div>
<div class="line"><span class="lineno">  449</span>  }</div>
<div class="line"><span class="lineno">  450</span>  <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  451</span>  {</div>
<div class="line"><span class="lineno">  452</span>    <a class="code hl_define" href="../../d2/d0d/message_8h.html#aacd8f4b44e327860edbf38228d5918b0">err</a>(<span class="stringliteral">&quot;Problems correcting the eps files from %s_tmp.eps to %s_tmp_corr.eps\n&quot;</span>,</div>
<div class="line"><span class="lineno">  453</span>        <a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase),<a class="code hl_function" href="../../d7/d5c/qcstring_8h.html#a9851ebb5ae2f65b4d2b1d08421edbfd2">qPrint</a>(formBase));</div>
<div class="line"><span class="lineno">  454</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  455</span>  }</div>
<div class="line"><span class="lineno">  456</span>  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  457</span>}</div>
<div class="ttc" id="anamespace_portable_html_a230fceefc8f9abd1e8d4be71d7eef281"><div class="ttname"><a href="../../d7/d6f/namespace_portable.html#a230fceefc8f9abd1e8d4be71d7eef281">Portable::openOutputStream</a></div><div class="ttdeci">std::ofstream openOutputStream(const QCString &amp;name, bool append=false)</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d1c/portable_8cpp_source.html#l00665">portable.cpp:665</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d2/d0d/message_8h_source.html#l00084">err</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00676">Portable::openInputStream()</a>, <a class="el" href="../../d0/d1c/portable_8cpp_source.html#l00665">Portable::openOutputStream()</a>, and <a class="el" href="../../d7/d5c/qcstring_8h_source.html#l00661">qPrint()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<a id="a6234dcdd2552e24e6910182b50633a58" name="a6234dcdd2552e24e6910182b50633a58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6234dcdd2552e24e6910182b50633a58">&#9670;&#160;</a></span>updateFormulaSize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double updateFormulaSize </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/db0/class_formula.html">Formula</a> *</td>          <td class="paramname"><span class="paramname"><em>formula</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>x2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int</td>          <td class="paramname"><span class="paramname"><em>y2</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00334">334</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  335</span>{</div>
<div class="line"><span class="lineno">  336</span>  <span class="keywordtype">double</span> scaleFactor = 1.25;</div>
<div class="line"><span class="lineno">  337</span>  <span class="keywordtype">int</span> zoomFactor = <a class="code hl_define" href="../../db/d16/config_8h.html#a06b59c3720174e9078f613095a89b295">Config_getInt</a>(FORMULA_FONTSIZE);</div>
<div class="line"><span class="lineno">  338</span>  <span class="keywordflow">if</span> (zoomFactor&lt;8 || zoomFactor&gt;50) zoomFactor=10;</div>
<div class="line"><span class="lineno">  339</span>  scaleFactor *= zoomFactor/10.0;</div>
<div class="line"><span class="lineno">  340</span> </div>
<div class="line"><span class="lineno">  341</span>  <span class="keywordflow">if</span> (formula)</div>
<div class="line"><span class="lineno">  342</span>  {</div>
<div class="line"><span class="lineno">  343</span>    std::lock_guard&lt;std::mutex&gt; lock(<a class="code hl_variable" href="#a2eb5aacd88293a8b5b1651f814592500">g_formulaUpdateMutex</a>);</div>
<div class="line"><span class="lineno">  344</span>    formula-&gt;<a class="code hl_function" href="../../d2/db0/class_formula.html#ad6f4bcbc9d72789367acac83a3ea6846">setWidth</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((x2-x1)*scaleFactor+0.5));</div>
<div class="line"><span class="lineno">  345</span>    formula-&gt;<a class="code hl_function" href="../../d2/db0/class_formula.html#aa98f77319800a11b67fc2be1a2b5f0d4">setHeight</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>((y2-y1)*scaleFactor+0.5));</div>
<div class="line"><span class="lineno">  346</span>  }</div>
<div class="line"><span class="lineno">  347</span>  <span class="keywordflow">return</span> scaleFactor;</div>
<div class="line"><span class="lineno">  348</span>}</div>
<div class="ttc" id="aclass_formula_html_aa98f77319800a11b67fc2be1a2b5f0d4"><div class="ttname"><a href="../../d2/db0/class_formula.html#aa98f77319800a11b67fc2be1a2b5f0d4">Formula::setHeight</a></div><div class="ttdeci">void setHeight(int height)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9a/formula_8h_source.html#l00041">formula.h:41</a></div></div>
<div class="ttc" id="aclass_formula_html_ad6f4bcbc9d72789367acac83a3ea6846"><div class="ttname"><a href="../../d2/db0/class_formula.html#ad6f4bcbc9d72789367acac83a3ea6846">Formula::setWidth</a></div><div class="ttdeci">void setWidth(int width)</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d9a/formula_8h_source.html#l00040">formula.h:40</a></div></div>
<div class="ttc" id="aconfig_8h_html_a06b59c3720174e9078f613095a89b295"><div class="ttname"><a href="../../db/d16/config_8h.html#a06b59c3720174e9078f613095a89b295">Config_getInt</a></div><div class="ttdeci">#define Config_getInt(name)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d16/config_8h_source.html#l00034">config.h:34</a></div></div>
<div class="ttc" id="aformula_8cpp_html_a2eb5aacd88293a8b5b1651f814592500"><div class="ttname"><a href="#a2eb5aacd88293a8b5b1651f814592500">g_formulaUpdateMutex</a></div><div class="ttdeci">static std::mutex g_formulaUpdateMutex</div><div class="ttdef"><b>Definition</b> <a href="../../d7/d5b/formula_8cpp_source.html#l00332">formula.cpp:332</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../db/d16/config_8h_source.html#l00034">Config_getInt</a>, <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00332">g_formulaUpdateMutex</a>, <a class="el" href="../../d3/d9a/formula_8h_source.html#l00041">Formula::setHeight()</a>, and <a class="el" href="../../d3/d9a/formula_8h_source.html#l00040">Formula::setWidth()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00473">generateFormula()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a2eb5aacd88293a8b5b1651f814592500" name="a2eb5aacd88293a8b5b1651f814592500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2eb5aacd88293a8b5b1651f814592500">&#9670;&#160;</a></span>g_formulaUpdateMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex g_formulaUpdateMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00332">332</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00334">updateFormulaSize()</a>.</p>

</div>
</div>
<a id="a45390d3758ea90a1a3501782f0e4e087" name="a45390d3758ea90a1a3501782f0e4e087"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45390d3758ea90a1a3501782f0e4e087">&#9670;&#160;</a></span>g_inkscapeDetectionMutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::mutex g_inkscapeDetectionMutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00725">725</a> of file <a class="el" href="../../d7/d5b/formula_8cpp_source.html">formula.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d5b/formula_8cpp_source.html#l00729">determineInkscapeVersion()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="../../d7/d5b/formula_8cpp.html">formula.cpp</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.0 </li>
  </ul>
</div>
</body>
</html>
